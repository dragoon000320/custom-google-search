"use strict";document.addEventListener("DOMContentLoaded",function(){String.prototype.format=function(){var e=this;for(var t in arguments)e=e.replace("{"+t+"}",arguments[t]);return e};var t,e,n,o=(t="",n=e=0,{getQuery:function(){return t},setQuery:function(e){t=e},getImgPage:function(){return e},nextImgPage:function(){return e=23<++e?23:e},prevImgPage:function(){return e=--e<0?0:e},defImgPage:function(){e=0},getWebPage:function(){return n},nextWebPage:function(){return n=23<++n?23:n},prevWebPage:function(){return n=--n<0?0:n},defWebPage:function(){n=0}}),s='<div id="web-res{0}" class="web-res"><div class="title">{1}</div><a class="ref" href="{2}" target="_blank">{3}</a><p class="paragraph">{4}</p></div>\n',u='<div class="pagination m-1"><a id="prevPage">⇠</a><a id="currentPage{0}">{1}</a><a id="nextPage">⇢</a></div>',i="Sorry, something wrong happened while processing your {0} request. You can try again later. Response from the server:\r\n{1}",r="https://www.googleapis.com/customsearch/v1?key=AIzaSyCuHWvYhUXDMLtZqT7V76qzFgv0ov4ATFo&cx=006315541262340538026:zh1ntmntkfw&q={0}&prettyPrint=false&start={1}&num={2}",c=document.getElementById("web-content"),g=document.getElementById("img-content"),a=document.getElementById("query-input"),m=function(n,r){var a=new XMLHttpRequest;a.onreadystatechange=function(){var e,t;4==a.readyState&&(200==a.status?r(a.responseText):(e=a.responseText,t=-1!==n.indexOf("&searchType=image"),alert(i.format(t?"image search":"web page search",e?e.toString():"empty"))))},a.open("GET",n,!0),a.send()},l=function(i,g,e){m(r.format(i,g*e+1,e),function(e){o.setQuery(i);var t,n=JSON.parse(e).items;if(c.innerHTML)for(t=0;t<=n.length;t++)if(t===n.length)document.getElementById("currentPageWeb").text=g+1;else{var r=document.getElementById("web-res"+t),a=r.querySelector(".ref");r.querySelector(".title").innerHTML=n[t].htmlTitle,a.href=n[t].link,a.innerHTML=n[t].displayLink,r.querySelector(".paragraph").innerHTML=n[t].htmlSnippet.replace(/<br\s*\/?>/gi," ")}else for(t=-1;t<=n.length;t++)c.innerHTML+=-1===t?'<div class="caption m-1">Web Results</div>':t===n.length?u.format("Web",g+1):s.format(t,n[t].htmlTitle,n[t].link,n[t].displayLink,n[t].htmlSnippet.replace(/<br\s*\/?>/gi," "))})},f=function(a,i,e){m(r.format(a,i*e+1,e)+"&searchType=image",function(e){o.setQuery(a);var t,n=JSON.parse(e).items;if(g.innerHTML)for(t=0;t<=n.length;t++)if(t===n.length)document.getElementById("currentPageImg").text=i+1;else{var r=document.getElementById("imgRef"+t);r.querySelector(".img-res").src=n[t].image.thumbnailLink,r.href=n[t].image.contextLink}else for(t=-1;t<=n.length;t++)g.innerHTML+=-1===t?'<div class="caption m-1">Image Results</div>':t===n.length?u.format("Img",i+1):'<a id="imgRef{0}" href="{1}" target="_blank"><img class="img-res" src="{2}"/></a>'.format(t,n[t].image.contextLink,n[t].image.thumbnailLink)})};document.getElementById("search-button").onclick=function(){a.value&&(l(a.value,0,4),f(a.value,0,9),o.defImgPage(),o.defWebPage())},a.onkeypress=function(e){"Enter"===e.key&&(e.preventDefault(),a.value&&(l(a.value,0,4),f(a.value,0,9),o.defWebPage(),o.defImgPage()))},c.addEventListener("click",function(e){"nextPage"===e.target.id&&o.getWebPage()<23&&l(o.getQuery(),o.nextWebPage(),4),"prevPage"==e.target.id&&0<o.getWebPage()&&l(o.getQuery(),o.prevWebPage(),4)},!1),g.addEventListener("click",function(e){"nextPage"===e.target.id&&o.getImgPage()<23&&f(o.getQuery(),o.nextImgPage(),9),"prevPage"==e.target.id&&0<o.getImgPage()&&f(o.getQuery(),o.prevImgPage(),9)},!1)});